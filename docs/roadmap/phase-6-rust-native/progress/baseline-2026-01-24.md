# Phase 6 Baseline Benchmarks

Date: 2026-01-24
Owner: Agent Runtime Team
Status: Captured

## Commands
- pnpm perf:baseline
- pnpm perf:metrics
- pnpm bench:cache (invoked by perf:baseline)

## Metrics

| Metric | Baseline | Target | Notes |
| --- | --- | --- | --- |
| Sandbox startup | 1.35ms (P99) | <10ms | sandbox-rs createSandbox + manager init, 50 iters |
| Event log P99 | 2.84ms | <5ms | NativeTaskGraphEventLog append, 1000 iters |
| Checkpoint save | 7.34ms (P99) | <5ms | RustCheckpointStorage save, 100 iters |
| Checkpoint load | 26.18ms (P99) | <5ms | RustCheckpointStorage load, 100 iters |
| Token counting | 14.21ms / 10k tokens (avg) | <1ms / 10k tokens | Native tokenizer binding, 200 iters |
| Diff patch | 18.47ms (P99) | <5ms | createTwoFilesPatch, 2k lines, 200 iters |
| Symbol query | 104.66ms (P99) | <5ms | Native symbol index, 10k symbols, 500 iters |
| Spooler memory | 2.39MB heap / 1.06MB RSS (P99) | TBD | File spooler write, ~512KB payload |

## Captured Artifacts

- artifacts/perf-baseline.json (cache bench results)
- artifacts/perf-metrics.json (Phase 6 baseline metrics)

## Notes
- Capture baselines before switching hot paths to Rust.
- Attach perf artifacts under `artifacts/` if generated by scripts.
- Spooler memory reports before/after deltas per run (not true peak RSS).
- Perf metrics can vary with system load; compare multiple runs when evaluating regressions.
