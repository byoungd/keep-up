# Roadmap Progress Update

Date: 2026-01-21
Owner: Keep-Up Engineering
Status: Active
Sources: git log (recent merges), docs/roadmap/*, code snapshot under packages/

## Summary
- Agent Runtime tracks A-K are delivered with tooling hardening and optimization merged.
- Module decomposition is partially complete: core/control/tools/memory/persistence/sandbox/telemetry/vision packages exist, but execution plane and artifacts/checkpoint manager are still in the monolith.
- Next-phase tracks (MCP security, tool framework, state/memory) are partially implemented; remaining work is mainly wiring, audit surfaces, and consolidation.
- UI Arc/Dia tracks 1-3 are complete; the older Cowork Arc/Dia checklist overlaps with delivered UI work and needs QA/polish follow-through.

## Roadmap vs Code Snapshot

### Agent Runtime 2026 (Tracks A-L)
| Track | Roadmap Status | Code Status | Notes |
| --- | --- | --- | --- |
| A-G | Completed | Completed | Recovery, tool governance, checkpointing, delegation, SOP, routing, AI envelope implemented with tests. |
| H | Completed | Completed | Optimization merged across core/memory/persistence/sandbox/telemetry/vision. |
| I-K | Completed | Completed | Cache, container pool, memory cache in place. |
| L | Approved | In Progress | Execution plane package missing; artifacts + checkpoint manager still in monolith; facade partially wired. |

### Architecture Tracks (L1-L4, M1-M5)
- L1 Execution package: not started (no `packages/agent-runtime-execution`).
- L2 Persistence: checkpoint threads/shadow git in `agent-runtime-persistence`; artifacts remain in `agent-runtime/src/artifacts`.
- L3 Tools: moved to `agent-runtime-tools` with facades in `agent-runtime`.
- L4 Facade: partial re-exports for tools/control/memory/telemetry; execution/persistence still monolith.
- M1-M5 capabilities: implemented in monolith (message bus, turn checkpoints, spooling, registry isolation, health fallback) and need re-home after L1/L2.

### Next Phase Tracks (N/P/R)
- Track N (MCP 2.0 + security): transport parity, token store, scope mapping, and injection guardrails implemented; remaining work is audit/event surfacing and secure token storage policy hardening.
- Track P (state/memory): checkpoint threads + time-travel scaffolding exist; runtime wiring, UX flows, and lifecycle integration pending.
- Track R (tool framework): coordinator, hooks, auto-approver exist; remaining work is integration cleanup and documentation/tests alignment.

### UI / Cowork
- UI Track 1-3 (foundation/components/motion) completed in design system + Cowork app.
- Cowork Arc/Dia implementation plan overlaps with completed work; remaining checklist items are QA/polish.

## Evidence from Recent Merges (git log)
- Modular runtime packages delivered: core, control, memory, persistence, sandbox, telemetry, vision.
- MCP tooling hardened with transport + scope changes and input validation.
- Cowork skills discovery and UI spec component alignment merged.

## Next Stage Parallel Tracks (Recommended)

| Track | Scope | Dependencies | Exit Criteria |
| --- | --- | --- | --- |
| L1 | Execution plane extraction (`@ku0/agent-runtime-execution`) | core/control/telemetry/tools | Orchestrator + executor moved, builds cleanly, smoke tests pass. |
| L2b | Persistence consolidation (artifacts + checkpoint manager) | core/persistence | Artifacts + checkpoint manager moved; monolith exports removed. |
| L4b | Facade wiring + dependency enforcement | L1, L2b, L3 | `@ku0/agent-runtime` re-exports new packages; dependency checks green. |
| N2 | MCP security finish (audit + storage policy) | tools/security | MCP server status + auth audits emitted; secure token storage policy documented. |
| P2 | State/time-travel wiring into runtime | L1, L2b | Threaded checkpoints wired; time-travel navigator usable in runtime APIs. |

## Parallel Track Work Breakdown (Ready for Branching)

### L1: Execution plane extraction
Branch: `refactor/agent-runtime-execution-plane`

Scope:
- Scaffold `packages/agent-runtime-execution` (package.json, tsconfig, src/index.ts).
- Move execution modules from `packages/agent-runtime/src/` (orchestrator, executor, context, routing, sop, tasks, pipeline, preflight, prompts, reasoning, workflows, streaming, swarm, knowledge).
- Update imports to use `@ku0/agent-runtime-core`, `@ku0/agent-runtime-control`, `@ku0/agent-runtime-telemetry`.
- Move tests to new package or update paths.

Exit criteria:
- `@ku0/agent-runtime-execution` builds.
- Orchestrator smoke tests pass.
- No circular deps in execution package.

Tests:
- `pnpm --filter @ku0/agent-runtime-execution build`
- Optional: `pnpm dlx madge packages/agent-runtime-execution/src --circular --extensions ts,tsx`

### L2b: Persistence consolidation (artifacts + checkpoint manager)
Branch: `refactor/agent-runtime-persistence-consolidation`

Scope:
- Move artifacts (`packages/agent-runtime/src/artifacts`) into `packages/agent-runtime-persistence/src/artifacts`.
- Move checkpoint manager + storages (`packages/agent-runtime/src/checkpoint/*`) into persistence package.
- Update runtime/kernel imports to pull from `@ku0/agent-runtime-persistence`.
- Align tests to new package paths.

Exit criteria:
- Persistence package exports artifacts + checkpoint manager.
- Monolith exports removed or re-exported via facade only.
- Checkpoint/artifact tests pass.

Tests:
- `pnpm --filter @ku0/agent-runtime-persistence build`
- Targeted checkpoint/artifact unit tests (after move).

### L4b: Facade wiring + dependency enforcement
Branch: `refactor/agent-runtime-facade-wiring`

Scope:
- Update `packages/agent-runtime/package.json` dependencies to new plane packages.
- Update `packages/agent-runtime/src/index.ts` re-exports to point to new packages for execution + persistence.
- Update composition root wiring in `packages/agent-runtime/src/kernel`.
- Add or confirm dependency check script (madge/dependency-cruiser).

Exit criteria:
- `@ku0/agent-runtime` builds with new packages.
- Facade API compatible with previous exports.
- Dependency checks green.

Tests:
- `pnpm --filter @ku0/agent-runtime build`
- `pnpm check:circular` (or documented equivalent).

### N2: MCP security finish (audit + storage policy)
Branch: `feat/mcp-security-audit`

Scope:
- Emit MCP server connection/auth status as events (from `remoteServer.ts` status changes).
- Wire audit events into telemetry/event log.
- Document secure token storage policy (key management/rotation) and default config.
- Add tests for status/audit emission.

Exit criteria:
- MCP connection/auth lifecycle emits auditable events.
- Token storage policy documented and referenced in MCP config docs.

Tests:
- `pnpm --filter @ku0/agent-runtime-tools test` (MCP tests) or targeted MCP unit tests.

### P2: State/time-travel wiring
Branch: `feat/state-time-travel-wiring`

Scope:
- Expose `CheckpointThreadManager` + time-travel navigator via runtime APIs.
- Wire thread IDs into orchestrator/run contexts.
- Integrate checkpoint/thread lifecycle into runtime entry points.
- Add API-level tests for thread creation/listing and time-travel navigation.

Exit criteria:
- Threaded checkpoints accessible via runtime facade.
- Time-travel navigator usable for restore/diff operations.

Tests:
- Targeted persistence + runtime integration tests after wiring.

## Parallelization Notes
- L1 and L2b can proceed in parallel with N2.
- L4b depends on L1/L2b/L3 and should start after those merges.
- P2 should start after L1/L2b expose stable execution + persistence interfaces.

## Risks
- Dual implementations (monolith + packages) can drift without clear cutover plan.
- Test surface will grow after extraction; targeted smoke tests should be added per package.
- MCP auth storage policy needs a clear default before UX surfaces go live.
