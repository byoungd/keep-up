// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`diagnosticsBundle > builds a stable diagnostics bundle snapshot 1`] = `
{
  "annotations": [
    {
      "chainPolicy": "required_order",
      "content": undefined,
      "contentSummary": {
        "hash": "d87360e7",
        "preview": "Short note",
        "size": 10,
      },
      "displayState": "active_unverified",
      "id": "anno-1",
      "spanCount": 1,
      "verified": false,
    },
  ],
  "divergence": null,
  "document": {
    "blockCount": null,
    "frontiers": [
      "f-1",
    ],
    "versionVector": {
      "a": 1,
    },
  },
  "environment": {
    "buildHash": "hash-1",
    "language": "en",
    "platform": "test",
    "userAgent": "unit-test",
  },
  "errors": [],
  "exportedAt": "2026-01-01T00:00:00.000Z",
  "limits": {
    "maxAnnotations": 50,
    "maxErrors": 20,
    "maxInlinePayload": 200,
    "maxOps": 20,
    "maxTextPreview": 120,
  },
  "ops": [
    {
      "opCodes": [
        "OP_TEXT_EDIT",
      ],
      "timestamp": 1,
      "touchedBlocks": 1,
      "touchedRanges": 0,
      "txnIndex": undefined,
    },
  ],
  "policy": {
    "degradationSteps": [],
    "degraded": false,
    "effective": {
      "policy_id": "default",
    },
    "manifest": {
      "ai_native_policy": {
        "agent_coordination": {
          "claim_timeout_ms": 30000,
          "enabled": true,
          "max_concurrent_agents": 10,
          "require_agent_registration": true,
        },
        "ai_opcodes": {
          "allowed": [
            "OP_AI_GENERATE",
            "OP_AI_REWRITE",
            "OP_AI_CORRECT",
            "OP_AI_EXPAND",
            "OP_AI_SUMMARIZE",
            "OP_AI_TRANSLATE",
            "OP_AI_REFINE",
            "OP_AI_REVIEW",
            "OP_AI_SUGGEST",
            "OP_AI_VALIDATE",
          ],
          "require_approval": [
            "OP_AI_RESTRUCTURE",
            "OP_AI_SPLIT_MERGE",
          ],
        },
        "data_access": {
          "allow_external_fetch": false,
          "max_context_chars": 8000,
          "pii_handling": "block",
          "redaction_strategy": "mask",
        },
        "determinism": {
          "require_explicit_ops": true,
        },
        "gateway": {
          "idempotency_window_ms": 60000,
          "max_ops_per_request": 50,
          "max_payload_bytes": 200000,
        },
        "intent_tracking": {
          "enabled": true,
          "intent_retention_days": 90,
          "require_intent": true,
        },
        "provenance": {
          "enabled": true,
          "require_model_id": true,
          "store_rationale_summary": false,
          "track_inline": true,
        },
        "security": {
          "agent_token_ttl_ms": 3600000,
          "allow_external_models": false,
          "audit_retention_days": 180,
          "require_signed_requests": true,
        },
        "semantic_merge": {
          "ai_autonomy": "suggest_only",
          "auto_merge_threshold": 0.85,
          "enabled": true,
          "max_auto_merge_complexity": "simple",
          "prefer_human_edits": true,
        },
        "transactions": {
          "default_atomicity": "all_or_nothing",
          "default_timeout_ms": 60000,
          "enabled": true,
          "max_operations_per_txn": 100,
        },
        "version": "v1",
      },
      "ai_sanitization_policy": {
        "allowed_block_types": [
          "paragraph",
          "heading",
          "list_item",
          "code",
          "quote",
          "table",
          "table_row",
          "table_cell",
        ],
        "allowed_marks": [
          "bold",
          "italic",
          "underline",
          "strike",
          "code",
          "link",
        ],
        "allowed_url_protocols": [
          "https:",
          "http:",
          "mailto:",
        ],
        "limits": {
          "max_attribute_count": 1000,
          "max_nesting_depth": 100,
          "max_payload_bytes": 1048576,
        },
        "reject_unknown_structure": true,
        "sanitize_mode": "whitelist",
        "version": "v1",
      },
      "anchor_encoding": {
        "format": "base64",
        "version": "v2",
      },
      "block_id_policy": {
        "overrides": {},
        "version": "v1",
      },
      "canonicalizer_policy": {
        "drop_empty_nodes": true,
        "mark_order": [
          "bold",
          "italic",
          "underline",
          "strike",
          "code",
          "link",
        ],
        "mode": "recursive_tree",
        "normalize_whitespace": true,
        "version": "v2",
      },
      "capabilities": {
        "ai_audit": true,
        "ai_data_access": true,
        "ai_deterministic": true,
        "ai_gateway_v2": true,
        "ai_native": true,
        "ai_provenance": true,
        "ai_replace_spans": true,
        "ai_transactions": true,
        "bounded_gap": true,
        "cross_block_annotations": true,
        "multi_agent": true,
        "reorder_blocks": true,
        "semantic_merge": true,
        "tables": true,
      },
      "chain_policy": {
        "defaults": {
          "comment": {
            "kind": "required_order",
            "max_intervening_blocks": 0,
          },
          "highlight": {
            "kind": "strict_adjacency",
            "max_intervening_blocks": 0,
          },
          "suggestion": {
            "kind": "strict_adjacency",
            "max_intervening_blocks": 0,
          },
        },
        "version": "v5",
      },
      "conformance_kit_policy": {
        "kernel_recommended": true,
        "kernel_required_in_repo": true,
        "version": "v1",
      },
      "coords": {
        "kind": "utf16",
      },
      "dev_tooling_policy": {
        "force_full_scan_button": true,
        "state_visualizer": true,
        "version": "v2",
      },
      "history_policy": {
        "force_verify_on_restore": true,
        "restore_enters_unverified": true,
        "restore_skip_grace": true,
        "trusted_local_undo": true,
        "version": "v1",
      },
      "integrity_policy": {
        "chain_hash": {
          "enabled": true,
          "mode": "eager",
        },
        "checkpoint": {
          "enabled": true,
          "every_ms": 5000,
          "every_ops": 200,
        },
        "context_hash": {
          "debounce_ms": 500,
          "enabled": true,
          "mode": "lazy_verify",
        },
        "version": "v3",
      },
      "lfcc_version": "0.9.1",
      "partial_policy": {
        "defaults": {
          "comment": "allow_islands",
          "highlight": "allow_drop_tail",
          "suggestion": "none",
        },
        "version": "v4",
      },
      "policy_id": "default",
      "relocation_policy": {
        "default_level": 1,
        "enable_level_2": false,
        "enable_level_3": false,
        "level_2_max_distance_ratio": 0.1,
        "level_3_max_block_radius": 2,
        "version": "v2",
      },
      "structure_mode": "B",
      "v": 1,
    },
  },
  "protocol": {
    "lfccVersion": "0.9.1",
    "policyId": "default",
  },
  "structuralConflicts": [],
  "sync": {
    "clientId": "client-1",
    "docId": "doc-1",
    "effectiveManifest": {
      "policy_id": "default",
    },
    "error": null,
    "lastSyncAt": 10,
    "peers": [],
    "pendingUpdates": 0,
    "sessionId": "session-1",
    "state": "connected",
  },
  "version": "1.0.0",
}
`;
