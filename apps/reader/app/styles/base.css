/* Base Styles */
@layer base {
  * {
    border-color: var(--color-border);
  }

  body {
    background-color: var(--reader-canvas, var(--color-background));
    color: var(--color-foreground);
    background-image: radial-gradient(
        900px circle at 12% 8%,
        var(--color-ambient-paper),
        transparent 55%
      ), radial-gradient(760px circle at 88% 12%, var(--color-ambient-emerald), transparent 55%),
      radial-gradient(820px circle at 18% 84%, var(--color-ambient-blue), transparent 60%);
    background-repeat: no-repeat;
    @apply antialiased;
  }

  /* Smooth scrolling for anchor links */
  html {
    scroll-behavior: smooth;
  }

  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }
  }

  ::selection {
    /* Use very low opacity to simulate blend and allow underlying highlights to show through */
    background-color: rgba(59, 130, 246, 0.25) !important; /* Blue-500 with low opacity */
    color: inherit !important;
  }

  .dark ::selection {
    background-color: rgba(96, 165, 250, 0.3) !important; /* Blue-400 with low opacity */
  }

  .dark .prose pre {
    background-color: rgb(20 20 25);
  }

  .lfcc-editor .ProseMirror > [data-block-id].block-just-moved {
    animation: block-move-flash 1s ease-out forwards;
  }

  .dark .lfcc-editor .ProseMirror > [data-block-id].block-just-moved {
    animation: block-move-flash 500ms ease-out forwards;
  }

  .reader-surface {
    background-color: var(--reader-canvas, var(--color-background));
    font-family: var(--reader-font-family);
  }

  .reader-prose {
    font-family: var(--reader-font-family);
    font-size: var(--reader-font-size);
    line-height: var(--reader-line-height);
  }

  /* Auto-hiding scrollbar - Linear style */
  .scrollbar-auto-hide {
    scrollbar-width: thin;
    scrollbar-color: transparent transparent;
    transition: scrollbar-color var(--duration-normal) var(--ease-smooth);
  }

  .scrollbar-auto-hide:hover,
  .scrollbar-auto-hide:focus-within,
  .scrollbar-auto-hide.is-scrolling {
    scrollbar-color: var(--color-border) transparent;
  }

  /* WebKit scrollbar styling */
  .scrollbar-auto-hide::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  .scrollbar-auto-hide::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-auto-hide::-webkit-scrollbar-thumb {
    background: transparent;
    border-radius: 4px;
    border: 2px solid transparent;
    background-clip: content-box;
    transition: background var(--duration-normal) var(--ease-smooth);
  }

  .scrollbar-auto-hide:hover::-webkit-scrollbar-thumb,
  .scrollbar-auto-hide:focus-within::-webkit-scrollbar-thumb,
  .scrollbar-auto-hide.is-scrolling::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border: 2px solid transparent;
    background-clip: content-box;
  }

  .scrollbar-auto-hide::-webkit-scrollbar-thumb:hover {
    background: var(--color-muted-foreground);
    border: 2px solid transparent;
    background-clip: content-box;
  }

  /* Linear-style Utilities */
  .glass-surface {
    @apply bg-surface-0/70 backdrop-blur-xl border-border/40;
  }

  .premium-shadow {
    box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.03), 0 2px 4px rgba(0, 0, 0, 0.05), 0 12px 24px
      rgba(0, 0, 0, 0.05);
  }

  .dark .premium-shadow {
    box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.05), 0 2px 4px rgba(0, 0, 0, 0.2), 0 12px 24px
      rgba(0, 0, 0, 0.2);
  }

  .linear-border {
    @apply border border-border/40 hover:border-border/60 transition-colors duration-200;
  }

  .premium-gradient-bg {
    background: linear-gradient(135deg, var(--color-surface-0) 0%, var(--color-surface-1) 100%);
  }
}
